" === Color Definitions ======================================================
let mauve = '#cba6f7'   " Purple accent color
let blue = '#89b4fa'    " Blue accent color
let green = '#a6e3a1'   " Green accent color
let red = '#f38ba8'     " Red accent color

" === Core Settings ==========================================================
set scrolloff=6         " Keep 6 lines visible around cursor
set history=1001        " Extended command history
set relativenumber      " Hybrid line numbering
set hlsearch            " Highlight search matches
set incsearch           " Show search matches as you type
set ignorecase          " Case-insensitive searching
set smartcase           " Case-sensitive if search contains uppercase
set gdefault            " Global substitute by default
set notimeout           " Disable mapping timeout
set timeoutlen=5000     " 5s timeout for key sequences

" === Plugin Configuration ===================================================
set multiple-cursors    " Enable multiple cursors
set surround            " Enable surround plugin
set NERDTree            " Enable NERDTree file explorer
set quickscope          " Enhanced f/F/t/T navigation

" === Which-Key Configuration ================================================
set which-key           " Enable Which-Key popups
nnoremap <SPACE> <Nop>  " Free spacebar for leader mapping

" Visual Customization
let g:WhichKey_Dividejr = ' â†’ '       " Separator between key and description
let g:WhichKey_FontFamily = 'GeistMono'
let g:WhichKey_FontSize = 14
let g:WhichKey_KeyStyle = 'bold'
let g:WhichKey_KeyColor = 'keyword'   " Use theme's keyword color
let g:WhichKey_PrefixColor = red      " Red prefix color for visual hierarchy
let g:WhichKey_CommandColor = green   " Green command descriptions

" === Key Mappings ===========================================================
" -- Leader Mappings ---------------------------------------------------------
let mapleader="\<space>"             " Set space as leader key

" [B]uffer Management
nnoremap <leader>xx <Action>(CloseContent)
nnoremap <leader>xa <Action>(CloseAllEditors)
nnoremap <leader>xo <Action>(CloseAllEditorsButActive)
nnoremap <leader>xp <Action>(CloseAllUnpinnedEditors)

" [W]indow Management
nnoremap <leader>ww <Action>(HideAllWindows)
nnoremap <leader>wk <Action>(StretchSplitToTop)
nnoremap <leader>wj <Action>(StretchSplitToBottom)
nnoremap <leader>wh <Action>(StretchSplitToLeft)
nnoremap <leader>wl <Action>(StretchSplitToRight)

" [T]ab Management
nnoremap <leader>sh <Action>(MoveTabLeft)
nnoremap <leader>sl <Action>(MoveTabRight)
nnoremap <leader>sH <Action>(SplitHorizontally)
nnoremap <leader>sV <Action>(SplitVertically)

" [F]ile Operations
nnoremap <leader>of <Action>(OpenFile)
nnoremap <leader>rf <Action>(RecentFiles)
nnoremap <leader>fp <Action>(FindInPath)
nnoremap <leader>yp <Action>(CopyAbsolutePath)

" [C]ode Actions
nnoremap <leader>c  <Action>(CommentByLineComment)
nnoremap <leader>C  <Action>(CommentByBlockComment)
nnoremap <leader>fc <Action>(ReformatCode)
nnoremap <leader>rn <Action>(RenameElement)

" === Navigation Enhancements ================================================
" Quick movement between splits
nmap <C-k> <C-w>k
nmap <C-j> <C-w>j
nmap <C-h> <C-w>h
nmap <C-l> <C-w>l

" Enhanced cursor movement in insert mode
inoremap <C-h> <Left>
inoremap <C-j> <Down>
inoremap <C-k> <Up>
inoremap <C-l> <Right>

" === Plugin-Specific Configuration ==========================================
" QuickScope Configuration
let g:qs_highlight_on_keys = ['f', 'F', 't', 'T']
let g:qs_accepted_chars = ['a'-'z', 'A'-'Z', '0'-'9']
let g:qs_primary_color = green
let g:qs_secondary_color = red

" Highlighted Yank Configuration
let g:highlightedyank_highlight_duration = 1000
let g:highlightedyank_highlight_color = "rgba(58, 197, 187, 155)"

" === Development Workflow ===================================================
" Debugging Shortcuts
nnoremap <leader>dx <Action>(Debug)
nnoremap <leader>db <Action>(ToggleLineBreakpoint)
nnoremap <leader>dv <Action>(ViewBreakpoints)

" Testing Configuration
nnoremap <leader>rt <Action>(RunTests)
nnoremap <leader>rc <Action>(ContextRun)
nnoremap <leader>gt <Action>(GotoTest)

" === Custom Which-Key Groups ================================================
" Define descriptive group labels
let gpacebar for leader mappingWhichKeyDesc_buffer_ops = "<Space>b Buffer Operations"
let g:WhichKeyDesc_window_mgmt = "<Space>w Window Management"
let g:WhichKeyDesc_tab_ops = "<Space>t Tab Operations"
let g:WhichKeyDesc_file_ops = "<Space>f File Operations"
let g:WhichKeyDesc_code_actions = "<Space>c Code Actions"
let g:WhichKeyDesc_debugging = "<Space>d Debugging Tools"

" === Final Configuration ====================================================
" Ensure NERDTree toggle works properly
nnoremap <leader>e :NERDTreeToggle<CR>

" Enable system clipboard integration
noremap <leader>y "*y
noremap <leader>p "*p
